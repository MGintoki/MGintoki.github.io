<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>prometheus学习笔记 | MGintoki</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="参考资料 Prometheus 1.1 监控是什么 1.3 监控机制 1.4 指标 1.5 方法论 1.6 警报和通知 可视化   2、prometheus 2.2 架构 2.3 数据模型 2.6 参考链接   3、实战 3.1 安装 3.2 获取监控指标   4、监控主机和容器 4.1 node exporter 4.2 cAdvisor 4.3 抓取数据 4.4 标签 node_ex">
<meta property="og:type" content="article">
<meta property="og:title" content="prometheus学习笔记">
<meta property="og:url" content="https://mgintoki.github.io/2021/04/27/devops/prometheus%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="MGintoki">
<meta property="og:description" content="参考资料 Prometheus 1.1 监控是什么 1.3 监控机制 1.4 指标 1.5 方法论 1.6 警报和通知 可视化   2、prometheus 2.2 架构 2.3 数据模型 2.6 参考链接   3、实战 3.1 安装 3.2 获取监控指标   4、监控主机和容器 4.1 node exporter 4.2 cAdvisor 4.3 抓取数据 4.4 标签 node_ex">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-04-27T12:34:46.000Z">
<meta property="article:modified_time" content="2021-04-30T04:07:37.454Z">
<meta property="article:author" content="MGintoki">
<meta property="article:tag" content="DevOps">
<meta property="article:tag" content="监控">
<meta property="article:tag" content="Prometheus">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="MGintoki" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/images/favicon-32x32.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">MGintoki</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://mgintoki.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-devops/prometheus阅读笔记" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/27/devops/prometheus%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/" class="article-date">
  <time class="dt-published" datetime="2021-04-27T12:34:46.000Z" itemprop="datePublished">2021-04-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/DevOps/">DevOps</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      prometheus学习笔记
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <div class="toc">

<!-- toc -->

<ul>
<li><a href="#can-kao-zi-liao">参考资料</a></li>
<li><a href="#prometheus">Prometheus</a><ul>
<li><a href="#1-1-jian-kong-shi-shi-me">1.1 监控是什么</a></li>
<li><a href="#1-3-jian-kong-ji-zhi">1.3 监控机制</a></li>
<li><a href="#1-4-zhi-biao">1.4 指标</a></li>
<li><a href="#1-5-fang-fa-lun">1.5 方法论</a></li>
<li><a href="#1-6-jing-bao-he-tong-zhi-ke-shi-hua">1.6 警报和通知 可视化</a></li>
</ul>
<ul>
<li><a href="#2-prometheus">2、prometheus</a><ul>
<li><a href="#2-2-jia-gou">2.2 架构</a></li>
<li><a href="#2-3-shu-ju-mo-xing">2.3 数据模型</a></li>
<li><a href="#2-6-can-kao-lian-jie">2.6 参考链接</a></li>
</ul>
</li>
<li><a href="#3-shi-zhan">3、实战</a><ul>
<li><a href="#3-1-an-zhuang">3.1 安装</a></li>
<li><a href="#3-2-huo-qu-jian-kong-zhi-biao">3.2 获取监控指标</a></li>
</ul>
</li>
<li><a href="#4-jian-kong-zhu-ji-he-rong-qi">4、监控主机和容器</a><ul>
<li><a href="#4-1-node-exporter">4.1 node exporter</a></li>
<li><a href="#4-2-cadvisor">4.2 cAdvisor</a></li>
<li><a href="#4-3-zhua-qu-shu-ju">4.3 抓取数据</a></li>
<li><a href="#4-4-biao-qian">4.4 标签</a></li>
<li><a href="#node-exporter-advisor-zhi-biao">node_exporter advisor 指标</a></li>
<li><a href="#4-6-cha-xun-chi-jiu-hua">4.6 查询持久化</a></li>
<li><a href="#4-7-grafana-ke-shi-hua">4.7 grafana 可视化</a></li>
</ul>
</li>
<li><a href="#5-fu-wu-fa-xian">5 服务发现</a><ul>
<li><a href="#5-1-ji-yu-wen-jian-fu-wu-fa-xian">5.1 基于文件服务发现</a></li>
<li><a href="#5-2-ji-yu-api-de-fu-wu-fa-xian">5.2 基于API的服务发现</a></li>
<li><a href="#5-3-ji-yu-dns-de-fu-wu-fei-fa-xian">5.3 基于DNS的服务费发现</a></li>
</ul>
</li>
<li><a href="#exporter">Exporter</a></li>
<li><a href="#promql">PromQL</a><ul>
<li><a href="#metric-lei-xing">Metric 类型</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#granafana">Granafana</a><ul>
<li><a href="#grafana-ji-ben-gai-nian">Grafana 基本概念</a></li>
<li><a href="#grafana-shu-ju-ke-shi-hua-san-chong-panel">Grafana数据可视化（三种Panel）</a><ul>
<li><a href="#1-graph-panel">1、Graph Panel</a></li>
<li><a href="#2-heatmap-panel">2、Heatmap Panel</a></li>
<li><a href="#3-singlestat">3、SingleStat</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- tocstop -->

</div>
<span id="more"></span>

<p>[toc]</p>
<h1><span id="can-kao-zi-liao">参考资料</span></h1><p>微信读书 《prometheus 监控实战》 <a target="_blank" rel="noopener" href="https://weread.qq.com/web/reader/4ca32c50718f639f4ca492bk68d3221025468d30a95982e">https://weread.qq.com/web/reader/4ca32c50718f639f4ca492bk68d3221025468d30a95982e</a> </p>
<p><strong>重要：青牛踏雪prometheus中文文档 <a target="_blank" rel="noopener" href="https://www.prometheus.wang/">https://www.prometheus.wang/</a></strong></p>
<h1><span id="prometheus">Prometheus</span></h1><h3><span id="1-1-jian-kong-shi-shi-me">1.1 监控是什么</span></h3><p>技术监控-面向开发者</p>
<p>业务监控-面向应用程序/用户</p>
<h3><span id="1-3-jian-kong-ji-zhi">1.3 监控机制</span></h3><ul>
<li>形式：探针和内省</li>
<li>方式：pull 和 push</li>
<li>内容：指标和日志</li>
</ul>
<h3><span id="1-4-zhi-biao">1.4 指标</span></h3><p>prometheus 以指标为中心</p>
<ul>
<li>是什么 指标是观察点+颗粒度 -&gt; 时间序列</li>
<li>类型 测量型、计数型、直方图</li>
<li>指标的聚合 单个关注个体，多个整合数据</li>
<li>摘要 平均数、中位数、百分数、方差</li>
</ul>
<p><strong>观察点=“我”的“身高”</strong><br><strong>时间序列=我的身高在”时间刻度“上的变话</strong></p>
<p>指标是”可度量特征“例如 身高、体重</p>
<p>标签集是用来标定提供被衡量指标的主题。（衡量叫xx的，身份证号是xx的，就可以精确标定一个主体）</p>
<p>xx的身高随年的变化，就是一个时间序列。</p>
<p>时间序列:</p>
<p>^  <br><br>  │   . . . . . . . . . . . . . . . . .   . .       node_cpu{cpu=”cpu0”,mode=”idle”}<br><br>  │     . . . . . . . . . . . . . . . . . . .   node_cpu{cpu=”cpu0”,mode=”system”}<br><br>  │     . . . . . . . . . .   . . . . . . . .   node_load1{}<br><br>  │     . . . . . . . . . . . . . . . .   . .<br>  v<br>    &lt;—————— 时间 —————-&gt;</p>
<p>在time-series中的每一个点称为一个观察点/样本（sample），样本由以下三部分组成：</p>
<ul>
<li>指标(metric)：metric name和描述当前样本特征的labelsets;</li>
<li>时间戳(timestamp)：一个精确到毫秒的时间戳;</li>
<li>样本值(value)： 一个folat64的浮点型数据表示当前样本的值。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plain">&lt;--------------- metric ---------------------&gt;&lt;-timestamp -&gt;&lt;-value-&gt;<br>http_request_total&#123;status&#x3D;&quot;200&quot;, method&#x3D;&quot;GET&quot;&#125;@1434417560938 &#x3D;&gt; 94355<br>http_request_total&#123;status&#x3D;&quot;200&quot;, method&#x3D;&quot;GET&quot;&#125;@1434417561287 &#x3D;&gt; 94334<br>http_request_total&#123;status&#x3D;&quot;404&quot;, method&#x3D;&quot;GET&quot;&#125;@1434417560938 &#x3D;&gt; 38473<br>http_request_total&#123;status&#x3D;&quot;404&quot;, method&#x3D;&quot;GET&quot;&#125;@1434417561287 &#x3D;&gt; 38544<br>http_request_total&#123;status&#x3D;&quot;200&quot;, method&#x3D;&quot;POST&quot;&#125;@1434417560938 &#x3D;&gt; 4748<br>http_request_total&#123;status&#x3D;&quot;200&quot;, method&#x3D;&quot;POST&quot;&#125;@1434417561287 &#x3D;&gt; 4785<br></code></pre></td></tr></table></figure>

<h3><span id="1-5-fang-fa-lun">1.5 方法论</span></h3><p>侧重主机 use法则 针对每个资源 使用率、饱和度、错误测量</p>
<p>侧重应用程序 google黄金4指标 延迟、流量、错误、饱和度</p>
<h3><span id="1-6-jing-bao-he-tong-zhi-ke-shi-hua">1.6 警报和通知 可视化</span></h3><p>警报和通知是给人看的，应包含关键信息</p>
<p>可视化便于组织信息</p>
<h2><span id="2-prometheus">2、prometheus</span></h2><h3><span id="2-2-jia-gou">2.2 架构</span></h3><p>指标收集</p>
<ul>
<li><p>端点（endpoint）是可抓取信息来源</p>
</li>
<li><p>目标（target）执行抓取的信息</p>
</li>
<li><p>一组目标是作业（job）</p>
</li>
<li><p>广义上讲所有可以向Prometheus提供监控样本数据的程序都可以被称为一个Exporter。而Exporter的一个实例称为target</p>
</li>
</ul>
<p>服务发现</p>
<ul>
<li><p>用户提供列表</p>
</li>
<li><p>配置管理工具 prometheus 配置文件</p>
</li>
<li><p>consul 自动发现</p>
</li>
</ul>
<p>聚合和警报</p>
<p>查询数据</p>
<ul>
<li>promQL</li>
</ul>
<p>自治</p>
<p>冗余和高可用</p>
<p>可视化</p>
<ul>
<li>grafana</li>
</ul>
<h3><span id="2-3-shu-ju-mo-xing">2.3 数据模型</span></h3><p>指标名称</p>
<p>标签</p>
<p>时间序列值</p>
<p>符号表示</p>
<blockquote>
<p>total_web_site{site=”testApp”,instance=”webserver”,job=”web”}</p>
</blockquote>
<h3><span id="2-6-can-kao-lian-jie">2.6 参考链接</span></h3><p>2.6 参考链接<br>·Prometheus官网：<a target="_blank" rel="noopener" href="https://prometheus.io/%E3%80%82">https://prometheus.io/。</a></p>
<p>·Prometheus文档：<a target="_blank" rel="noopener" href="https://prometheus.io/docs/%E3%80%82">https://prometheus.io/docs/。</a></p>
<p>·Prometheus GitHub主页：<a target="_blank" rel="noopener" href="https://github.com/prometheus/%E3%80%82">https://github.com/prometheus/。</a></p>
<p>·Prometheus GitHub源码：<a target="_blank" rel="noopener" href="https://github.com/prometheus/prometheus%E3%80%82">https://github.com/prometheus/prometheus。</a></p>
<p>·Prometheus参考视频：大规模Prometheus和时间序列设计（<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=gNmWzkGViAY%EF%BC%89%E3%80%82">https://www.youtube.com/watch?v=gNmWzkGViAY）。</a></p>
<p>·Grafana官网：<a target="_blank" rel="noopener" href="https://grafana.com/%E3%80%82">https://grafana.com/。</a></p>
<h2><span id="3-shi-zhan">3、实战</span></h2><h3><span id="3-1-an-zhuang">3.1 安装</span></h3><p>mac 本地：brew install prometheus</p>
<p>docker ： docker pull prom/prometheus</p>
<p>docker run -p 9090:9090 –name prometheus -d -v $PWD/prometheus.yml:/etc/prometheus/prometheus.yml  prom/prometheus</p>
<p>prometheus.yml : </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs plain">global:<br>  scrape_interval:     15s<br>  evaluation_interval: 15s<br><br>alerting:<br>  alertmanagers:<br>  - static_configs:<br>    - targets:<br>      # - alertmanager:9093<br><br>rule_files:<br>  # - &quot;first_rules.yml&quot;<br>  # - &quot;second_rules.yml&quot;<br><br>scrape_configs:<br>  - job_name: &#39;prometheus&#39;<br>    static_configs:<br>      - targets: [&#39;localhost:9090&#39;]<br></code></pre></td></tr></table></figure>

<blockquote>
<p>docker run -p 9090:9090 -d –name prom -v $PWD/prometheus.yml:/etc/prometheus/prometheus.yml prom/prometheus</p>
</blockquote>
<h3><span id="3-2-huo-qu-jian-kong-zhi-biao">3.2 获取监控指标</span></h3><p>localhost:9090/metrics</p>
<p>localhost:9090/graph PromQL</p>
<blockquote>
<p>sum(rate(promhttp_metric_handler_requests_total[5m]))by(job)</p>
</blockquote>
<p>以job标签分组来查询 http请求 5min时间序列内的平均增长率</p>
<h2><span id="4-jian-kong-zhu-ji-he-rong-qi">4、监控主机和容器</span></h2><h3><span id="4-1-node-exporter">4.1 node exporter</span></h3><p>制作一个node_exporter镜像,包括获取、解压、执行node_exporter 在默认的9100端口，并将该端口暴露出来</p>
<p>(同时该镜像包括安装weget 和 ping)</p>
<p>Dockerfile:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plain">FROM ubuntu:18.04<br>MAINTAINER James Turnbull &quot;james@example.com&quot;<br>RUN apt-get -qq update &amp;&amp; apt-get -qq install wget<br>RUN apt-get qq install iputils-ping<br>WORKDIR &#x2F;opt<br>RUN wget https:&#x2F;&#x2F;github.com&#x2F;prometheus&#x2F;node_exporter&#x2F;releases&#x2F;download&#x2F;v0.16.0&#x2F;node_exporter-0.16.0.linux-amd64.tar.gz<br>RUN tar -xzf node_exporter-*<br>RUN cp node_exporter-*&#x2F;node_exporter &#x2F;usr&#x2F;local&#x2F;bin&#x2F;<br><br>EXPOSE 9100<br><br>CMD [&quot;node_exporter&quot;]<br></code></pre></td></tr></table></figure>

<blockquote>
<p>docker build -t my/node_exporter . 通过Dockerfile制作镜像</p>
</blockquote>
<p>启动两个node_exporter</p>
<blockquote>
<p>docker run -p 9100:9100 –name  node_export1 -d my/node_exporter</p>
</blockquote>
<blockquote>
<p>docker run -p 9100:9100 –name node_export1 -d my/node_exporter</p>
</blockquote>
<p>修改promtheus.yml配置，使其加入两个node的target</p>
<blockquote>
<p>docker stop prom</p>
</blockquote>
<blockquote>
<p>docker rm prom</p>
</blockquote>
<p>prometheus抓取node_exporter</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs plain">global:<br>  scrape_interval:     15s &#x2F;&#x2F;抓取之间间隔<br>  evaluation_interval: 15s &#x2F;&#x2F;计算指标间隔<br><br>alerting:<br>  alertmanagers: <br>  - static_configs:<br>    - targets:<br>      - alertmanager:9093<br><br>rule_files:<br>  - &quot;rules&#x2F;node_rules.yml&quot;<br><br>scrape_configs:<br>- job_name: &#39;prometheus&#39; <br>  static_configs:<br>    - targets: [&#39;localhost:9090&#39;]<br><br>- job_name: &#39;node&#39; &#x2F;&#x2F;这里标识，通过制作好的node_exporter镜像，启动了两个容器<br>  static_configs:   &#x2F;&#x2F; 进入到容器里获取ip<br>    - targets: [&#39;172.17.0.3:9100&#39;, &#39;172.17.0.4:9100&#39;]<br><br>- job_name: &#39;docker&#39; &#x2F;&#x2F;这里的配置是抓取cadvisor的数据，cadvisor作为一个容器运行<br>  static_configs:<br>    - targets: [&#39;172.17.0.5:8080&#39;]<br>  metric_relabel_configs:<br>  - source_labels: [id]<br>    regex: &#39;&#x2F;docker&#x2F;([a-z0-9]+)&#39;<br>    replacement: &#39;$1&#39;<br>    target_label: container_id<br>  - source_labels: [__name__]<br>    separator: &#39;,&#39;<br>    regex: &#39;(container_tasks_state|container_memory_failures_total)&#39;<br>    action: drop<br></code></pre></td></tr></table></figure>

<p>docker run -p 9090:9090 -d –name prom –link node_exporter1:node1 –link node_exporter2:node2 -v $PWD/prometheus.yml:/etc/prometheus/prometheus.yml prom/prometheus</p>
<h3><span id="4-2-cadvisor">4.2 cAdvisor</span></h3><p>cadvisor 作为Docker容器运行，可以收集Docker本身以及所有Docker容器的信息提供给prometheus</p>
<p>运行cAdvisor</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs plain">docker run \<br>  --volume&#x3D;&#x2F;:&#x2F;rootfs:ro \<br>  --volume&#x3D;&#x2F;var&#x2F;run:&#x2F;var&#x2F;run:rw \<br>  --volume&#x3D;&#x2F;sys:&#x2F;sys:ro \<br>  --volume&#x3D;&#x2F;var&#x2F;lib&#x2F;docker&#x2F;:&#x2F;var&#x2F;lib&#x2F;docker:ro \<br>  --volume&#x3D;&#x2F;dev&#x2F;disk&#x2F;:&#x2F;dev&#x2F;disk:ro \<br>  --publish&#x3D;8080:8080 \<br>  --detach&#x3D;true \<br>  --name&#x3D;cadvisor \<br>  google&#x2F;cadvisor:latest<br></code></pre></td></tr></table></figure>

<blockquote>
<p>localhost:8080/containers </p>
</blockquote>
<blockquote>
<p>localhost:8080/docker 查看所有已运行的docker 镜像、容器</p>
</blockquote>
<blockquote>
<p>localhost:8080/metrics 获取所有指标</p>
</blockquote>
<h3><span id="4-3-zhua-qu-shu-ju">4.3 抓取数据</span></h3><p>抓取的生命周期</p>
<blockquote>
<p>在每个抓取周期（scrape_interval定义）里，prometheus会检查执行的作业（job），作业会生成一个目标（target）列表。（作业生成目标列表的过程，被称为服务发现）</p>
</blockquote>
<blockquote>
<p>服务发现返回一个目标列表，包含一组元数据（meta data）</p>
</blockquote>
<blockquote>
<p>服务发现也会根据目标的配置，默认的生成一些标签.例如_metrics_path_，这些带有下划线的标签不会显示在页面UI上，部分可以被覆盖，例如可以再抓取配置里，设置metrics_path关键字</p>
</blockquote>
<p>生命周期：<br>服务发现-&gt; 配置 -&gt; 重新标记（relabale_configs) -&gt; 抓取 -&gt; 重新标记（metric_relable_configs)</p>
<h3><span id="4-4-biao-qian">4.4 标签</span></h3><blockquote>
<p>标签提供了时间序列的维度，定义了目标。标签和指标名称结合，作为时间序列的标识。</p>
</blockquote>
<p>4.4.1 标签分类</p>
<p>1 拓扑标签 2 模式标签</p>
<p>4.4.2 重新标记</p>
<p>重新标记目的：删除、添加、修改标签</p>
<p>两个阶段：</p>
<p>1、对来自服务发现的目标重新标记 -&gt; 元数据应用到标签</p>
<p>2、抓取之后指标保存到系统前，指定样式，丢弃指标</p>
<p><strong>抓取之前用relabel_configs，抓取之后metric_relabel_configs</strong></p>
<p>4.4.3 实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F;prometheus.yml metric_relabel_configs 配置示例<br>- job_name: &#39;docker&#39; &#x2F;&#x2F;这里的配置是抓取cadvisor的数据，cadvisor作为一个容器运行<br>  static_configs:<br>    - targets: [&#39;172.17.0.5:8080&#39;]<br>  metric_relabel_configs:<br>  <br>  - source_labels: [id]<br>  &#x2F;&#x2F;这个动作会检索标签为id的标签，然后去掉id的&#x2F;docker&#x2F;docker<br>  &#x2F;&#x2F;执行该动作前标签：id&#x3D;&quot;&#x2F;docker&#x2F;abcd...&quot;<br>  &#x2F;&#x2F;执行后标签为：abcd...<br>    regex: &#39;&#x2F;docker&#x2F;([a-z0-9]+)&#39;<br>    replacement: &#39;$1&#39; &#x2F;&#x2F;替换标签值，因为替换是默认动作，不需要像删除指定action<br>    target_label: container_id<br>    <br>    <br>  - source_labels: [__name__] <br>  &#x2F;&#x2F;source_labels指定要操作的标签<br>  &#x2F;&#x2F;这里的__name__标签是指标名称的预留（默认）标签<br>  &#x2F;&#x2F;通过regex，以正则形式，筛选__name__标签符合regex内容的标签<br>  &#x2F;&#x2F;然后执行drop 删除指标操作<br>  &#x2F;&#x2F;这里的separator，指如果source_labels里有多个值，用什么区分。<br>    separator: &#39;,&#39;<br>    regex: &#39;(container_tasks_state|container_memory_failures_total)&#39;<br>    action: drop &#x2F;&#x2F;删除标签指<br>    <br>  - regex: &#39;kernelVersion&#39;<br>    action: labeldrop &#x2F;&#x2F;该动作会删除所有匹配&#39;kernelVersion&#39;的标签<br>    <br></code></pre></td></tr></table></figure>

<h3><span id="node-exporter-advisor-zhi-biao">node_exporter advisor 指标</span></h3><p>cpu mode=”idle” cpu的闲置状态。</p>
<h3><span id="4-6-cha-xun-chi-jiu-hua">4.6 查询持久化</span></h3><p>在prometheus.yml中，可以指定记录规则文件位置</p>
<p>完整的prometheus.yml</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">global:</span><br>  <span class="hljs-attr">scrape_interval:</span>     <span class="hljs-string">15s</span><br>  <span class="hljs-attr">evaluation_interval:</span> <span class="hljs-string">15s</span><br><br><span class="hljs-attr">alerting:</span><br>  <span class="hljs-attr">alertmanagers:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">static_configs:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">alertmanager:9093</span><br><br><span class="hljs-attr">rule_files:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;rules/node_rules.yml&quot;</span><br><br><span class="hljs-attr">scrape_configs:</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">&#x27;prometheus&#x27;</span><br>  <span class="hljs-attr">static_configs:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">&#x27;localhost:9090&#x27;</span>]<br><br><span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">&#x27;node&#x27;</span><br>  <span class="hljs-attr">static_configs:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">&#x27;138.197.26.39:9100&#x27;</span>, <span class="hljs-string">&#x27;138.197.30.147:9100&#x27;</span>, <span class="hljs-string">&#x27;138.197.30.163:9100&#x27;</span>]<br><br><span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">&#x27;docker&#x27;</span><br>  <span class="hljs-attr">static_configs:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">&#x27;138.197.26.39:8080&#x27;</span>, <span class="hljs-string">&#x27;138.197.30.147:8080&#x27;</span>, <span class="hljs-string">&#x27;138.197.30.163:8080&#x27;</span>]<br>  <span class="hljs-attr">metric_relabel_configs:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">id</span>]<br>    <span class="hljs-attr">regex:</span> <span class="hljs-string">&#x27;/docker/([a-z0-9]+)&#x27;</span><br>    <span class="hljs-attr">replacement:</span> <span class="hljs-string">&#x27;$1&#x27;</span><br>    <span class="hljs-attr">target_label:</span> <span class="hljs-string">container_id</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">__name__</span>]<br>    <span class="hljs-attr">separator:</span> <span class="hljs-string">&#x27;,&#x27;</span><br>    <span class="hljs-attr">regex:</span> <span class="hljs-string">&#x27;(container_tasks_state|container_memory_failures_total)&#x27;</span><br>    <span class="hljs-attr">action:</span> <span class="hljs-string">drop</span><br></code></pre></td></tr></table></figure>

<p>node_rules.yml:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs plain">groups:<br>- name: node_rules<br>  rules:<br>  - record: instance:node_cpu:avg_rate5m<br>    expr: 100 - avg (irate(node_cpu_seconds_total&#123;job&#x3D;&quot;node&quot;,mode&#x3D;&quot;idle&quot;&#125;[5m])) by (instance) * 100<br>  - record: instance:node_cpus:count<br>    expr: count by (instance)(node_cpu_seconds_total&#123;mode&#x3D;&quot;idle&quot;&#125;)<br>  - record: instance:node_cpu_saturation_load1<br>    expr: node_load1 &gt; on (instance) 2 * count by (instance)(node_cpu_seconds_total&#123;mode&#x3D;&quot;idle&quot;&#125;)<br>  - record: instance:node_memory_usage:percentage<br>    expr: (node_memory_MemTotal_bytes - (node_memory_MemFree + node_memory_Cached_bytes + node_memory_Buffers_bytes)) &#x2F; node_memory_MemTotal_bytes * 100<br>  - record: instance:node_memory_swap_io_bytes:sum_rate<br>    expr: 1024 * sum by (instance) (<br>                 (rate(node_vmstat_pgpgin[1m])<br>                 + rate(node_vmstat_pgpgout[1m]))<br>          )<br>  - record: instance:root:node_filesystem_usage:percentage<br>    expr: (node_filesystem_size_bytes&#123;mountpoint&#x3D;&quot;&#x2F;&quot;&#125; - node_filesystem_free_bytes&#123;mountpoint&#x3D;&quot;&#x2F;&quot;&#125;) &#x2F; node_filesystem_size_bytes&#123;mountpoint&#x3D;&quot;&#x2F;&quot;&#125; * 100<br></code></pre></td></tr></table></figure>

<p>然后会生成一个新的时间序列，对应着之前的CPU负载率表达式：<code>instance:node_cpu:avg_rage5m</code></p>
<h3><span id="4-7-grafana-ke-shi-hua">4.7 grafana 可视化</span></h3><p>brew install granafa<br>brew service start granafa</p>
<p>·Grafana入门：<a target="_blank" rel="noopener" href="http://docs.grafana.org/guides/getting_started/%E3%80%82">http://docs.grafana.org/guides/getting_started/。</a></p>
<p>·Grafana教程和录像：<a target="_blank" rel="noopener" href="http://docs.grafana.org/tutorials/screencasts/%E3%80%82">http://docs.grafana.org/tutorials/screencasts/。</a></p>
<p>·Prometheus文档中的Grafana部分：<a target="_blank" rel="noopener" href="https://prometheus.io/docs/visualization/grafana/%E3%80%82">https://prometheus.io/docs/visualization/grafana/。</a></p>
<p>·Grafana预建仪表板：<a target="_blank" rel="noopener" href="https://grafana.com/dashboards">https://grafana.com/dashboards</a></p>
<hr>
<h2><span id="5-fu-wu-fa-xian">5 服务发现</span></h2><p>目的：在prometheus.yml的static_configs块里手动定义服务发现的方式，不够灵活。</p>
<h3><span id="5-1-ji-yu-wen-jian-fu-wu-fa-xian">5.1 基于文件服务发现</span></h3><blockquote>
<p>借助基于文件的服务发现，Prometheus会使用文件中指定的目标。这些文件通常由另一个系统生成，例如Puppet、++Ansible++或Chef等配置管理系统，或者从其他源（如CMDB）查询。定期执行脚本或进行查询可以（重新）生成这些文件。Prometheus会按指定的时间计划从这些文件重新加载目标。</p>
</blockquote>
<p>修改prometheus.yml,将作业指向服务发现的文件位置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs plain">- job_name: node<br>  file_sd_configs:<br>    - files:<br>      - targets&#x2F;nodes&#x2F;*.json<br>      refresh_interval: 5m<br><br>- job_name: docker<br>  file_sd_configs:<br>    - files:<br>      - targets&#x2F;docker&#x2F;*.json<br>      refresh_interval: 5m<br>  metric_relabel_configs:<br>  - source_labels: [id]<br>    regex: &#39;&#x2F;docker&#x2F;([a-z0-9]+)&#39;<br>    replacement: &#39;$1&#39;<br>    target_label: container_id<br>  - source_labels: [__name__]<br>    separator: &#39;,&#39;<br>    regex: &#39;(container_tasks_state|container_memory_failures_total)&#39;<br>    action: drop<br></code></pre></td></tr></table></figure>
<p>/targets/nodes/node.json （targets 目录在prometheus 目录下）<br>node.json</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plain">[&#123;<br>	&quot;targets&quot;: [&quot;138.197.26.39:9100&quot;, &quot;138.197.30.147:9100&quot;, &quot;138.197.30.163:9100&quot;]<br>&#125;]<br></code></pre></td></tr></table></figure>
<p>/targets/docker/docker.json</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plain">[&#123;<br>	&quot;targets&quot;: [&quot;138.197.26.39:8080&quot;, &quot;138.197.30.147:8080&quot;, &quot;138.197.30.163:8080&quot;]<br>&#125;]<br></code></pre></td></tr></table></figure>

<h3><span id="5-2-ji-yu-api-de-fu-wu-fa-xian">5.2 基于API的服务发现</span></h3><p>例如consul</p>
<h3><span id="5-3-ji-yu-dns-de-fu-wu-fei-fa-xian">5.3 基于DNS的服务费发现</span></h3><h2><span id="exporter">Exporter</span></h2><blockquote>
<p>Prometheus Server并不直接服务监控特定的目标，其主要任务负责数据的收集，存储并且对外提供数据查询支持。</p>
</blockquote>
<blockquote>
<p>Exporter可以是一个相对开放的概念，其可以是一个独立运行的程序独立于监控目标以外，也可以是直接内置在监控目标中。只要能够向Prometheus提供标准格式的监控样本数据即可</p>
</blockquote>
<h2><span id="promql">PromQL</span></h2><h3><span id="metric-lei-xing">Metric 类型</span></h3><p>1、counter 计数器 只增不减<br>cpu 在idle mode下累计耗费的事件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plain"># HELP node_cpu Seconds the cpus spent in each mode.<br># TYPE node_cpu counter<br>node_cpu&#123;cpu&#x3D;&quot;cpu0&quot;,mode&#x3D;&quot;idle&quot;&#125; 362812.7890625<br></code></pre></td></tr></table></figure>

<p>2、gauge 测量型/仪表盘</p>
<blockquote>
<p>node_memory_MemFree（主机当前空闲的内容大小）</p>
</blockquote>
<p>Gauge类型的监控指标，通过PromQL内置函数delta()可以获取样本在一段时间返回内的变化情况。例如，计算CPU温度在两个小时内的差异</p>
<blockquote>
<p>delta(cpu_temp_celsius{host=”zeus”}[2h])</p>
</blockquote>
<p>3、summary 摘要</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plain"># HELP prometheus_tsdb_wal_fsync_duration_seconds Duration of WAL fsync.<br># TYPE prometheus_tsdb_wal_fsync_duration_seconds summary<br>prometheus_tsdb_wal_fsync_duration_seconds&#123;quantile&#x3D;&quot;0.5&quot;&#125; 0.012352463<br>prometheus_tsdb_wal_fsync_duration_seconds&#123;quantile&#x3D;&quot;0.9&quot;&#125; 0.014458005<br>prometheus_tsdb_wal_fsync_duration_seconds&#123;quantile&#x3D;&quot;0.99&quot;&#125; 0.017316173<br>prometheus_tsdb_wal_fsync_duration_seconds_sum 2.888716127000002<br>prometheus_tsdb_wal_fsync_duration_seconds_count 216<br></code></pre></td></tr></table></figure>

<p>4、histogram 直方图<br>直接反映当前指标记录的总数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plain"># HELP prometheus_tsdb_compaction_chunk_range Final time range of chunks on their first compaction<br># TYPE prometheus_tsdb_compaction_chunk_range histogram<br>prometheus_tsdb_compaction_chunk_range_bucket&#123;le&#x3D;&quot;409600&quot;&#125; 0<br>prometheus_tsdb_compaction_chunk_range_bucket&#123;le&#x3D;&quot;1.6384e+06&quot;&#125; 260<br>prometheus_tsdb_compaction_chunk_range_bucket&#123;le&#x3D;&quot;6.5536e+06&quot;&#125; 780<br>prometheus_tsdb_compaction_chunk_range_bucket&#123;le&#x3D;&quot;2.62144e+07&quot;&#125; 780<br>prometheus_tsdb_compaction_chunk_range_bucket&#123;le&#x3D;&quot;+Inf&quot;&#125; 780<br>prometheus_tsdb_compaction_chunk_range_sum 1.1540798e+09<br>prometheus_tsdb_compaction_chunk_range_count 780<br></code></pre></td></tr></table></figure>

<p>参考：</p>
<p>青牛踏雪普罗米修斯中文文档Grafana部分 <a target="_blank" rel="noopener" href="https://www.prometheus.wang/grafana/">https://www.prometheus.wang/grafana/</a></p>
<h1><span id="granafana">Granafana</span></h1><h2><span id="grafana-ji-ben-gai-nian">Grafana 基本概念</span></h2><p>数据源（Data Source）：</p>
<blockquote>
<p>对于Granafa，像Prometheus这种可以为其提供数据的对象，统称为数据源。</p>
</blockquote>
<p>仪表盘 （Dashboard）：</p>
<blockquote>
<p>Dashboard是由Panl（面板）聚合而成的可视化数据展示区域。Grafana通过插件的形式，提供了多种pannel，例如Graph Pannel，Heatmap Pannel</p>
</blockquote>
<p>面板 （Panel）</p>
<blockquote>
<p>面板是一个Dashboard中的最基本可视化单元。每个pannel的数据源是可以不同的。Grafana通过对基于数据源的查询语句，构建起可视化数据。 Panel中存在Row的概念，可以组织和管理一组线管的Panel</p>
</blockquote>
<p>模板参数（Templating variables）</p>
<blockquote>
<p>通过指定模板参数，可以动态的实现数据的可视化。</p>
</blockquote>
<h2><span id="grafana-shu-ju-ke-shi-hua-san-chong-panel">Grafana数据可视化（三种Panel）</span></h2><p>Grafana数据可视化，是通过Panel来体现的，Panel作为最基础的可视化组件，具有Graph、Heatmap、SingleStat三种形式</p>
<p><strong>这一部分组主要讲了怎么在Grafana中创建Panel、改变Pannel样式等。</strong></p>
<h3><span id="1-graph-panel">1、Graph Panel</span></h3><p>Graph是通过折线图、柱状图的形式，显示监控样本随时间的变化趋势（时间序列）。</p>
<p>Graph适合Prometheus中的Gauge（测量性）和Counter（计数型）的监控数据可视化。</p>
<p>Graph方便多个数据对比</p>
<p>参考3.2.3 + 3.2.3.1 <a target="_blank" rel="noopener" href="https://www.prometheus.wang/grafana/grafana-panels.html">https://www.prometheus.wang/grafana/grafana-panels.html</a></p>
<h3><span id="2-heatmap-panel">2、Heatmap Panel</span></h3><p>热力图</p>
<h3><span id="3-singlestat">3、SingleStat</span></h3><p>主要是对于某个指标计数</p>
<p>参考3.2.3.3 <a target="_blank" rel="noopener" href="https://www.prometheus.wang/grafana/use_singlestat_panel.html">https://www.prometheus.wang/grafana/use_singlestat_panel.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mgintoki.github.io/2021/04/27/devops/prometheus%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/" data-id="ckoe9dg4k002qtgxg28k45vu0" data-title="prometheus学习笔记" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DevOps/" rel="tag">DevOps</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Prometheus/" rel="tag">Prometheus</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%9B%91%E6%8E%A7/" rel="tag">监控</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/04/27/network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          《计算机网络-自顶向下方法》阅读笔记
        
      </div>
    </a>
  
  
    <a href="/2021/04/27/devops/%E7%AC%AC%E4%B8%80%E6%9C%ACDocker%E4%B9%A6/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">《第一本Docker书》学习笔记</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CA/">CA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/">DevOps</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/">区块链</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E4%B9%A6/">杂书</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9E%B6%E6%9E%84/">架构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%BB%84/">计组</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CA/" style="font-size: 10px;">CA</a> <a href="/tags/DAO/" style="font-size: 12.5px;">DAO</a> <a href="/tags/DevOps/" style="font-size: 15px;">DevOps</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/HyperLedger/" style="font-size: 10px;">HyperLedger</a> <a href="/tags/K8S/" style="font-size: 10px;">K8S</a> <a href="/tags/Prometheus/" style="font-size: 10px;">Prometheus</a> <a href="/tags/did/" style="font-size: 17.5px;">did</a> <a href="/tags/mathchain/" style="font-size: 10px;">mathchain</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 10px;">分布式</a> <a href="/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 10px;">加密</a> <a href="/tags/%E5%8A%A0%E5%AF%86%E8%B5%84%E4%BA%A7/" style="font-size: 10px;">加密资产</a> <a href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/" style="font-size: 20px;">区块链</a> <a href="/tags/%E5%AE%B9%E5%99%A8/" style="font-size: 10px;">容器</a> <a href="/tags/%E6%9D%82%E4%B9%A6/" style="font-size: 12.5px;">杂书</a> <a href="/tags/%E6%9E%B6%E6%9E%84/" style="font-size: 12.5px;">架构</a> <a href="/tags/%E7%9B%91%E6%8E%A7/" style="font-size: 10px;">监控</a> <a href="/tags/%E7%BC%96%E7%A0%81/" style="font-size: 10px;">编码</a> <a href="/tags/%E7%BD%91%E5%85%B3/" style="font-size: 10px;">网关</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 12.5px;">计算机网络</a> <a href="/tags/%E8%AE%A1%E7%BB%84/" style="font-size: 10px;">计组</a> <a href="/tags/%E8%AF%81%E4%B9%A6/" style="font-size: 10px;">证书</a> <a href="/tags/%E9%87%91%E8%9E%8D/" style="font-size: 10px;">金融</a> <a href="/tags/%E9%93%BE%E7%A0%81/" style="font-size: 10px;">链码</a> <a href="/tags/%E9%9B%86%E7%BE%A4/" style="font-size: 10px;">集群</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/05/04/cs/%E7%BC%96%E7%A0%81,%E9%9A%90%E5%8C%BF%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A1%AC%E4%BB%B6%E8%83%8C%E5%90%8E%E7%9A%84%E8%AF%AD%E8%A8%80/">《编码，隐匿在计算机硬件背后的语言》阅读笔记</a>
          </li>
        
          <li>
            <a href="/2021/04/29/architecture/%E6%9E%B6%E6%9E%84%E4%BF%AE%E7%82%BC%E4%B9%8B%E9%81%93/">《架构修炼之道-亿级网关...》阅读笔记</a>
          </li>
        
          <li>
            <a href="/2021/04/29/CA/PKI-CA/">PKI/CA与数字证书技术大全</a>
          </li>
        
          <li>
            <a href="/2021/04/29/network/%E5%9B%BE%E8%A7%A3http/">图解http阅读笔记</a>
          </li>
        
          <li>
            <a href="/2021/04/28/hexo/config/">博客配置</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 MGintoki<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>